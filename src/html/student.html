<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Student Page - Benguet Technical School</title>
    <link rel="stylesheet" href="../css/student.css" />
  </head>
  <body>
    <nav>
      <div class="logo">
        <h1>BTS eLMS</h1>
      </div>
      <div id="student-profile">
        <img src="" />
        <h3 class="name">Student Name</h3>
        <p>Trainee</p>
        <p class="student-id-number">123456789</p>
      </div>
      <div id="navigation">
        <ul>
          <li><a class="dashboard active" href="#dashboard">Dashboard</a></li>
          <li><a class="courses" href="#courses">My Courses</a></li>
          <li><a class="activities" href="#activities">My Activities</a></li>
          <li><a class="enrollment" href="#enrollment">Enrollment</a></li>
          <li><a class="profile" href="#profile">Profile</a></li>
        </ul>
      </div>
      <div class="logout">
        <a href="../index.html"
          >Log out
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="24px"
            viewBox="0 -960 960 960"
            width="24px"
            fill="#006dda"
          >
            <path
              d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h280v80H200Zm440-160-55-58 102-102H360v-80h327L585-622l55-58 200 200-200 200Z"
            />
          </svg>
        </a>
      </div>
    </nav>

    <main>
      <div id="main-section">
        <section id="dashboard">
          <div class="container">
            <div id="dash-cards">
              <div class="card c1">
                <h3>Enrolled Courses</h3>
                <h2>2</h2>
                <p><i>Courses</i></p>
              </div>
              <div class="card c2">
                <h3>Hours Studied</h3>
                <h2>42</h2>
                <p><i>Hours</i></p>
              </div>
              <div class="card c3">
                <h3>Average Grade</h3>
                <h2>84%</h2>
                <p><i>Avg</i></p>
              </div>
              <div class="card c4">
                <h3>My Courses (Quick Access)</h3>
                <div class="inside-container">
                  <div class="wrapper">
                    <div class="infos">
                      <h4>Agricultural Crops Production NC II</h4>
                      <p class="trainer"><i>John Doe (Trainer)</i></p>
                    </div>
                    <button class="materials">Materials</button>
                  </div>
                  <div class="wrapper">
                    <div class="infos">
                      <h4>Automotive Servicing NC I</h4>
                      <p class="trainer"><i>Juan dela Cruz (Trainer)</i></p>
                    </div>
                    <button class="materials">Materials</button>
                  </div>
                </div>
              </div>
              <div class="card c5">
                <h3>Enrollment Requests</h3>
                <p>No pending requests</p>
                <button><i>Self-Enroll</i></button>
              </div>
            </div>
          </div>
        </section>
        <section id="courses">
          <div class="container">
            <h2>My Courses</h2>
            <table>
              <thead>
                <tr>
                  <th>Course</th>
                  <th>Instructor</th>
                  <th>Progress</th>
                  <th>Materials</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Agricultural Crops Production NC II</td>
                  <td>John Doe (Trainer)</td>
                  <td>50%</td>
                  <td>
                    <div class="content">
                      <a href="">Agriculture-1.pdf</a>
                    </div>
                    <div class="content">
                      <a href="">Slides-AgCH1.pptx</a>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>Automotive Servicing NC I</td>
                  <td>Juan dela Cruz (Trainer)</td>
                  <td>50%</td>
                  <td>
                    <div class="content">
                      <a href="">ASNC1-1.pdf</a>
                    </div>
                    <div class="content">
                      <a href="">Slides-ASCH1.pdf</a>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>
        <section id="activities">
          <div class="container">
            <h2>My Activities</h2>
            <table>
              <thead>
                <tr>
                  <th>Activity</th>
                  <th>Course</th>
                  <th>Due</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>

              <tbody>
                <tr>
                  <td>Quiz 1 Agriculture</td>
                  <td>Agricultural Crops Production NC II</td>
                  <td>02-23-2025</td>
                  <td>Pending</td>
                  <td>
                    <div class="button">
                      <button>Upload</button>
                      <div id="popup">
                        <div class="button-group">
                          <label id="file-label" for="file-input"
                            ><span id="file-name">Choose File</span>
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              height="24px"
                              viewBox="0 -960 960 960"
                              width="24px"
                              fill="#006aff"
                            >
                              <path
                                d="M440-200h80v-167l64 64 56-57-160-160-160 160 57 56 63-63v167ZM240-80q-33 0-56.5-23.5T160-160v-640q0-33 23.5-56.5T240-880h320l240 240v480q0 33-23.5 56.5T720-80H240Zm280-520v-200H240v640h480v-440H520ZM240-800v200-200 640-640Z"
                              /></svg></label>
                          <input
                            type="file"
                            name="file-input"
                            id="file-input"
                          />
                        </div>
                        <button>Upload</button>
                      </div>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>Activity 1 - ASNC1</td>
                  <td>Automotive Servicing NC I</td>
                  <td>03-30-2025</td>
                  <td>Submitted</td>
                  <td>
                    <div class="button">
                      <button disabled="disabled">✔ Submitted</button>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>
        <section id="enrollment"></section>
        <section id="profile"></section>
      </div>
      <div id="catalog">
        <div class="calendar-container">
          <div id="calendar-header"></div>
          <div id="calendar"></div>
        </div>
      </div>
    </main>

    <footer>
      <p>© 2025 Benguet Technical School. All rights reserved.</p>
    </footer>

    <!-- NAVIGATION TABS -->
    <script>
      const tabElements = document.querySelectorAll(
        ".dashboard, .courses, .activities, .enrollment, .profile"
      );
      const sectionElements = document.querySelectorAll(
        "#dashboard, #courses, #activities, #enrollment, #profile"
      );

      function handleTabAndSectionClick(clickedTab) {
        const tabClass = clickedTab.classList[0];
        const matchingSection = document.getElementById(tabClass);

        tabElements.forEach((el) => el.classList.remove("active"));
        sectionElements.forEach((el) => el.classList.remove("active"));

        clickedTab.classList.add("active");
        if (matchingSection) {
          matchingSection.classList.add("active");
        }
      }

      window.addEventListener("DOMContentLoaded", () => {
        const defaultTab = document.querySelector(".dashboard");
        if (defaultTab) handleTabAndSectionClick(defaultTab);
      });

      tabElements.forEach((tab) => {
        tab.addEventListener("click", () => handleTabAndSectionClick(tab));
      });
    </script>

    <!-- CALENDAR -->
    <script>
      const calendarHeader = document.getElementById("calendar-header");
      const calendar = document.getElementById("calendar");

      const today = new Date();
      const year = today.getFullYear();
      const month = today.getMonth();

      const monthNames = [
        "January",
        "February",
        "March",
        "April",
        "May",
        "June",
        "July",
        "August",
        "September",
        "October",
        "November",
        "December",
      ];

      async function phHolidays(year) {
        const response = await fetch(
          `https://date.nager.at/api/v3/PublicHolidays/${year}/PH`
        );
        const holidays = await response.json();
        return holidays.map((h) => h.date);
      }

      function renderCalendar(year, month, holidayDates) {
        calendarHeader.innerText = `${monthNames[month]} ${year}`;
        calendar.innerHTML = "";

        const firstDay = new Date(year, month, 1).getDay();
        const daysInMonth = new Date(year, month + 1, 0).getDate();
        const todayStr = today.toISOString().split("T")[0];

        for (let i = 0; i < firstDay; i++) {
          const empty = document.createElement("div");
          empty.className = "day";
          calendar.appendChild(empty);
        }

        for (let day = 1; day <= daysInMonth; day++) {
          const d = new Date(year, month, day);
          const isDate = d.toISOString().split("T")[0];
          const cell = document.createElement("div");
          cell.className = "day";
          cell.innerText = day;

          const dayOfWeek = d.getDay();
          if (dayOfWeek === 0) cell.classList.add("sunday");
          if (holidayDates.includes(isDate)) cell.classList.add("holiday");
          if (isDate === todayStr) cell.classList.add("today");

          calendar.appendChild(cell);
        }
      }

      async function initCalendar(year, month) {
        const holidayDates = await phHolidays(year);
        renderCalendar(year, month, holidayDates);
      }

      initCalendar(year, month);
    </script>

    <!-- ACTIVITIES FUNCTIONS -->
    <script>
      const popup = document.querySelector("#popup");
      const button = document.querySelector(".button > button");

      button.addEventListener("click", () => {
        if (popup.classList.contains("active")) {
          popup.classList.remove("active");
        } else {
          popup.classList.add("active");
        }
      });

      const fileInput = document.querySelector("#file-input");
      const fileName = document.querySelector("#file-name");
      const fileSVGLabel = document.querySelector("#file-label > svg");

      fileInput.addEventListener("change", function () {
        if (this.files && this.files.length > 0) {
          fileName.childNodes[0].nodeValue = this.files[0].name;
          fileSVGLabel.style.display = "none";
        } else {
          fileName.textContent = "Choose File";
          fileSVGLabel.style.display = "";
        }
      });
    </script>
  </body>
</html>
