<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Student Page - Benguet Technical School</title>
    <link rel="stylesheet" href="../css/student.css" />
  </head>
  <body>
    <nav>
      <div class="logo">
        <h1>BTS eLMS</h1>
      </div>
      <div id="student-profile">
        <img src="" alt="Student Profile Picture" />
        <h3 class="name">Student Name</h3>
        <p class="student-id-number">123456789</p>
      </div>
      <div id="navigation">
        <ul>
          <li><a class="dashboard active" href="#dashboard">Dashboard</a></li>
          <li><a class="news" href="#news">News</a></li>
          <li><a class="courses" href="#courses">Courses</a></li>
          <li><a class="trainers" href="#trainers">Trainers</a></li>
        </ul>
      </div>
    </nav>

    <main>
      <div id="main-section">
        <section id="dashboard">
          <div class="container">
            <div class="tab-pane">
              <div class="tab tab1 active" data-tab="tab1">Current Courses</div>
              <div class="tab tab2" data-tab="tab2">Credited Courses</div>
            </div>
            <div class="tab-content ongoing-content active" id="tab1">
              <p>Current Courses</p>
              <table>
                <thead>
                  <tr>
                    <th>Course Name</th>
                    <th>Course Code</th>
                    <th>Schedule</th>
                    <th>Instructor</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Agricultural Crops Production NC II</td>
                    <td>ACPNC2</td>
                    <td>MF 5:00-7:00</td>
                    <td>John Doe</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="tab-content finished-content" id="tab2">
              <p>Credited Courses</p>
              <table>
                <thead>
                  <tr>
                    <th>Course Name</th>
                    <th>Course Code</th>
                    <th>Grade</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Driving NC II</td>
                    <td>DNC2</td>
                    <td>88.69%</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </section>
        <section id="news"></section>
        <section id="courses"></section>
        <section id="trainers"></section>
      </div>
      <div id="catalog">
        <div class="calendar-container">
          <div id="calendar-header"></div>
          <div id="calendar"></div>
        </div>
      </div>
    </main>

    <footer>
      <p>Â© 2025 Benguet Technical School. All rights reserved.</p>
    </footer>

    <!-- NAVIGATION TABS -->
    <script>
      const tabElements = document.querySelectorAll(
        ".dashboard, .news, .courses, .trainers"
      );
      const sectionElements = document.querySelectorAll(
        "#dashboard, #news, #courses, #trainers"
      );

      function handleTabAndSectionClick(clickedTab) {
        const tabClass = clickedTab.classList[0];
        const matchingSection = document.getElementById(tabClass);

        tabElements.forEach((el) => el.classList.remove("active"));
        sectionElements.forEach((el) => el.classList.remove("active"));

        clickedTab.classList.add("active");
        if (matchingSection) {
          matchingSection.classList.add("active");
        }
      }

      window.addEventListener("DOMContentLoaded", () => {
        const defaultTab = document.querySelector(".dashboard");
        if (defaultTab) handleTabAndSectionClick(defaultTab);
      });

      tabElements.forEach((tab) => {
        tab.addEventListener("click", () => handleTabAndSectionClick(tab));
      });
    </script>

    <!-- DASHBOARD TABS -->
    <script>
      const tabSelectors = document.querySelectorAll(".tab");
      const tabContents = document.querySelectorAll(".tab-content");

      function handleSwitchingTabs(tabClicked) {
        const targetId = tabClicked.dataset.tab;
        const matchingSection = document.getElementById(targetId);

        tabSelectors.forEach((el) => el.classList.remove("active"));
        tabContents.forEach((el) => el.classList.remove("active"));

        tabClicked.classList.add("active");
        if (matchingSection) matchingSection.classList.add("active");
      }

      tabSelectors.forEach((tab) => {
        tab.addEventListener("click", () => handleSwitchingTabs(tab));
      });
    </script>

    <!-- CALENDAR -->
    <script>
      const calendarHeader = document.getElementById("calendar-header");
      const calendar = document.getElementById("calendar");

      const today = new Date();
      const year = today.getFullYear();
      const month = today.getMonth();

      const monthNames = [
        "January",
        "February",
        "March",
        "April",
        "May",
        "June",
        "July",
        "August",
        "September",
        "October",
        "November",
        "December",
      ];

      async function phHolidays(year) {
        const response = await fetch(
          `https://date.nager.at/api/v3/PublicHolidays/${year}/PH`
        );
        const holidays = await response.json();
        return holidays.map((h) => h.date);
      }

      function renderCalendar(year, month, holidayDates) {
        calendarHeader.innerText = `${monthNames[month]} ${year}`;
        calendar.innerHTML = "";

        const firstDay = new Date(year, month, 1).getDay();
        const daysInMonth = new Date(year, month + 1, 0).getDate();
        const todayStr = today.toISOString().split("T")[0];

        for (let i = 0; i < firstDay; i++) {
          const empty = document.createElement("div");
          empty.className = "day";
          calendar.appendChild(empty);
        }

        for (let day = 1; day <= daysInMonth; day++) {
          const d = new Date(year, month, day);
          const isDate = d.toISOString().split("T")[0];
          const cell = document.createElement("div");
          cell.className = "day";
          cell.innerText = day;

          const dayOfWeek = d.getDay();
          if (dayOfWeek === 0) cell.classList.add("sunday");
          if (holidayDates.includes(isDate)) cell.classList.add("holiday");
          if (isDate === todayStr) cell.classList.add("today");

          calendar.appendChild(cell);
        }
      }

      async function initCalendar(year, month) {
        const holidayDates = await phHolidays(year);
        renderCalendar(year, month, holidayDates);
      }

      initCalendar(year, month);
    </script>
  </body>
</html>
